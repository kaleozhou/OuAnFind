<%@ page contentType="text/html; charset=utf-8"%><%@ page language="java" import="java.util.*" pageEncoding="GBK"%><%@ taglib prefix="s" uri="/struts-tags"%><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>    <head>            <title>Finddictionary 操作主界面</title><style>.tdLabel {    text-align: right;}</style>        <meta http-equiv="pragma" content="no-cache">        <meta http-equiv="cache-control" content="no-cache">        <meta http-equiv="expires" content="0">        <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">        <meta http-equiv="description" content="This is my page">    <SCRIPT LANGUAGE="JavaScript">            imgsrc=new Array();            imgsrc[1]="c_c1.gif";            imgsrc[2]="c_c2.gif";            img =new Array();            for (i=0; i< imgsrc.length; i++) {              img[i]=new Image();              img[i].src="image\\"+imgsrc[i];            }            function change(number, picture) {              {                document[picture].src=img[number].src;              }            }            function del()            {                if(confirm("你真的想删除该记录么？"))                {                    return true;                }                return false;            }           function openPage(curpage)           {                document.all("currentPage").value = curpage ;                document.forms[0].submit();           }            function sort(tableId, sortColumn,nodeType) {             var table = document.getElementById("finddictionary");             var tableBody = table.tBodies[0];             var tableRows = tableBody.rows;             var rowArray = new Array();             for (var i = 0; i < tableRows.length; i++) {                 rowArray[i] = tableRows[i];             }             if (table.sortColumn == sortColumn) {                 rowArray.reverse();             } else {                 rowArray.sort(generateCompareTR(sortColumn, nodeType));             }             var tbodyFragment = document.createDocumentFragment();             for (var i = 0; i < rowArray.length; i++) {                 tbodyFragment.appendChild(rowArray[i]);             }             tableBody.appendChild(tbodyFragment);             table.sortColumn = sortColumn;            }            function generateCompareTR(sortColumn, nodeType) {             return function compareTR(trLeft, trRight) {              try{                   var leftValue = convert(trLeft.cells[sortColumn].firstChild.nodeValue, nodeType);                   var rightValue = convert(trRight.cells[sortColumn].firstChild.nodeValue, nodeType);                   if (leftValue < rightValue) {                       return -1;                   } else {                       if (leftValue > rightValue) {                           return 1;                       } else {                           return 0;                       }                   }                 }catch (e)                 {                    return 0;                  }             };            }            function convert(value, dataType) {             switch (dataType) {               case "Integer":                 return parseInt(value);                case "Float":                  return parseFloat(value);                default:                  return value.toString();              }             }     </script>    <link rel="stylesheet" href="css/table_design.css" type="text/css"></link></head>    <body style="font-size:15px">    <%      //和ListFinddictionaryByFdtypeFdnameFdvalueFdremarkFdparentidFddictionarystatusFdoperatorFdoperatedateFdstatusAction.java文件里定义的默认值保持一致即可      // 定义如下分页变量      int currentPage =1;    // 1、定义当前是第几页，默认是第1页      int lineSize= 10 ;     // 2、定义每页要显示的记录数，默认是每页10条      int allRecorders = 0 ; // 3、计算出实际记录数，默认      int pageSize= 0 ;      // 4、计算出实际页数，默认    %>    <%      if(request.getAttribute("currentPage")!=null)       currentPage=((Integer) request.getAttribute("currentPage") ).intValue();      if(request.getAttribute("allRecorders")!=null)       allRecorders=((Integer) request.getAttribute("allRecorders") ).intValue();      if(request.getAttribute("currentPage")!=null&&request.getAttribute("allRecorders")!=null)       pageSize = (allRecorders+lineSize-1)/lineSize ;     %>        <br>        <s:form name="form1" action="finddictionarylistByFdtypeFdnameFdvalueFdremarkFdparentidFddictionarystatusFdoperatorFdoperatedateFdstatus.action" method="post" >            <table border="1" style="BORDER-COLLAPSE: collapse" width="35%"                align="center" bgcolor="#FFFFCC" >                <tr align=center  bgcolor="#CCFF66">                    <td colspan="2">                        Finddictionary 自定义查询条件                    </td>                     <s:textfield id="fdtype_c" name="fdtype_c" label="fdtype"></s:textfield>                     <s:textfield id="fdname_c" name="fdname_c" label="fdname"></s:textfield>                     <s:textfield id="fdvalue_c" name="fdvalue_c" label="fdvalue"></s:textfield>                     <s:textfield id="fdremark_c" name="fdremark_c" label="fdremark"></s:textfield>                     <s:textfield id="fdparentid_c" name="fdparentid_c" label="fdparentid"></s:textfield>                     <s:textfield id="fddictionarystatus_c" name="fddictionarystatus_c" label="fddictionarystatus"></s:textfield>                     <s:textfield id="fdoperator_c" name="fdoperator_c" label="fdoperator"></s:textfield>                     <s:textfield id="fdoperatedate_c" name="fdoperatedate_c" label="fdoperatedate">                        <s:param name="value"><s:date name="fdoperatedate_c" format="yyyy-MM-dd HH:mm:ss"/></s:param>                     </s:textfield>                     <s:textfield id="fdstatus_c" name="fdstatus_c" label="fdstatus"></s:textfield>                    <s:hidden  name="currentPage" value="1"></s:hidden>                    <td colspan="2" align="center" >                    <IMG NAME="m1" SRC="image\c_c2.gif" BORDER="0" vspace="0" hspace="0" ONMOUSEOVER="change('1','m1')" ONMOUSEOUT= "change('2','m1')" onClick="form1.submit()" title="温馨提示:查询全部记录，不用输入任何条件!">                    </td>                    <!-- 也可以用下面的提交方式                    <s:submit name="s1" value="查 询" align="center"></s:submit>                     -->                </tr>            </table>        </s:form>        <br>        <table width="80%" align="center">         <s:url id="url_savefinddictionary" action="finddictionarysaveP">             <s:param name="fdtype_c"><s:property value="#request.fdtype_c" /></s:param>             <s:param name="fdname_c"><s:property value="#request.fdname_c" /></s:param>             <s:param name="fdvalue_c"><s:property value="#request.fdvalue_c" /></s:param>             <s:param name="fdremark_c"><s:property value="#request.fdremark_c" /></s:param>             <s:param name="fdparentid_c"><s:property value="#request.fdparentid_c" /></s:param>             <s:param name="fddictionarystatus_c"><s:property value="#request.fddictionarystatus_c" /></s:param>             <s:param name="fdoperator_c"><s:property value="#request.fdoperator_c" /></s:param>            <s:param name="fdoperatedate_c"><s:date name="#request.fdoperatedate_c" format="yyyy-MM-dd HH:mm:ss"/></s:param>             <s:param name="fdstatus_c"><s:property value="#request.fdstatus_c" /></s:param>         </s:url>         <s:a href="%{url_savefinddictionary}">添加新记录</s:a>        </table>        <hr color="#CCCCFF">        <table id="finddictionary" border="1" width="80%" align="center" bgcolor="#FFFFCC"            style="BORDER-COLLAPSE: collapse" >        <thead>            <tr align="center" bgcolor="#CCFF66"  title="单击栏头,可以降序或升序排列">                 <td onClick="sort(finddictionary,0,'Integer')">                    fdid                </td>                 <td onClick="sort(finddictionary,1,'String')">                    fdtype                </td>                 <td onClick="sort(finddictionary,2,'String')">                    fdname                </td>                 <td onClick="sort(finddictionary,3,'String')">                    fdvalue                </td>                 <td onClick="sort(finddictionary,4,'String')">                    fdremark                </td>                 <td onClick="sort(finddictionary,5,'Integer')">                    fdparentid                </td>                 <td onClick="sort(finddictionary,6,'String')">                    fddictionarystatus                </td>                 <td onClick="sort(finddictionary,7,'String')">                    fdoperator                </td>                 <td onClick="sort(finddictionary,8,'Date')">                    fdoperatedate                </td>                 <td onClick="sort(finddictionary,9,'Integer')">                    fdstatus                </td>                <td colspan="2">                    function                </td>            </tr>          </thead>            <s:iterator value="#request.list" id="finddictionary" >                <tr align="center" onmousemove="return this.bgColor='#FDF525';"  onmouseout="return this.bgColor='';">                 <td >                        <s:property value="#finddictionary.fdid" />                </td>                 <td >                        <s:property value="#finddictionary.fdtype" />                </td>                 <td >                        <s:property value="#finddictionary.fdname" />                </td>                 <td >                        <s:property value="#finddictionary.fdvalue" />                </td>                 <td >                        <s:property value="#finddictionary.fdremark" />                </td>                 <td >                        <s:property value="#finddictionary.fdparentid" />                </td>                 <td >                        <s:property value="#finddictionary.fddictionarystatus" />                </td>                 <td >                        <s:property value="#finddictionary.fdoperator" />                </td>                 <td >                        <s:date name="#finddictionary.fdoperatedate" format="yyyy-MM-dd HH:mm:ss"/>                </td>                 <td >                        <s:property value="#finddictionary.fdstatus" />                </td>                    <td>                             <s:url id="url_deletefinddictionary" action="finddictionaryremove">                             <s:param name="finddictionary.fdid"><s:property value="#finddictionary.fdid" /></s:param>                             <s:param name="fdtype_c"><s:property value="#request.fdtype_c" /></s:param>                             <s:param name="fdname_c"><s:property value="#request.fdname_c" /></s:param>                             <s:param name="fdvalue_c"><s:property value="#request.fdvalue_c" /></s:param>                             <s:param name="fdremark_c"><s:property value="#request.fdremark_c" /></s:param>                             <s:param name="fdparentid_c"><s:property value="#request.fdparentid_c" /></s:param>                             <s:param name="fddictionarystatus_c"><s:property value="#request.fddictionarystatus_c" /></s:param>                             <s:param name="fdoperator_c"><s:property value="#request.fdoperator_c" /></s:param>                             <s:param name="fdoperatedate_c"><s:date name="#request.fdoperatedate_c" format="yyyy-MM-dd HH:mm:ss"/></s:param>                             <s:param name="fdstatus_c"><s:property value="#request.fdstatus_c" /></s:param>                               </s:url>                               <s:a href="%{url_deletefinddictionary}" onclick="return del();">删除</s:a>                        <font color="#808080" size="3">|</font>                             <s:url id="url_updatefinddictionary" action="finddictionaryupdateP">                             <s:param name="finddictionary.fdid"><s:property value="#finddictionary.fdid" /></s:param>                             <s:param name="fdtype_c"><s:property value="#request.fdtype_c" /></s:param>                             <s:param name="fdname_c"><s:property value="#request.fdname_c" /></s:param>                             <s:param name="fdvalue_c"><s:property value="#request.fdvalue_c" /></s:param>                             <s:param name="fdremark_c"><s:property value="#request.fdremark_c" /></s:param>                             <s:param name="fdparentid_c"><s:property value="#request.fdparentid_c" /></s:param>                             <s:param name="fddictionarystatus_c"><s:property value="#request.fddictionarystatus_c" /></s:param>                             <s:param name="fdoperator_c"><s:property value="#request.fdoperator_c" /></s:param>                             <s:param name="fdoperatedate_c"><s:date name="#request.fdoperatedate_c" format="yyyy-MM-dd HH:mm:ss"/></s:param>                             <s:param name="fdstatus_c"><s:property value="#request.fdstatus_c" /></s:param>                               </s:url>                               <s:a href="%{url_updatefinddictionary}">修改</s:a>                        <font color="#808080" size="3">|</font>                        <s:a href="#">其他功能</s:a>                    </td>                </tr>            </s:iterator>        </table>       <s:if test="#finddictionary">          <% if (pageSize!=0) {%>          <table border="1" width="80%" align="center" bgcolor="#FFFFCC"             style="BORDER-COLLAPSE: collapse" >          <tr align="right"  bgcolor="#FFFFFF">              <td colspan=11>              <input style="background-color:Transparent;border-left:none; border-top:none;border-right:none;border-bottom:none;cursor:hand;" type="button" value="首页" onClick="openPage(1)" <%=currentPage==1?"disabled":""%>>              <input style="background-color:Transparent;border-left:none; border-top:none;border-right:none;border-bottom:none;cursor:hand;" type="button" value="上一页" onClick="openPage(<%=currentPage-1%>)" <%=currentPage==1?"disabled":""%>>              <input style="background-color:Transparent;border-left:none; border-top:none;border-right:none;border-bottom:none;cursor:hand;" type="button" value="下一页" onClick="openPage(<%=currentPage+1%>)" <%=currentPage==pageSize?"disabled":""%>>              <input style="background-color:Transparent;border-left:none; border-top:none;border-right:none;border-bottom:none;cursor:hand;" type="button" value="尾页" onClick="openPage(<%=pageSize%>)" <%=currentPage==pageSize?"disabled":""%>>              <input style="background-color:Transparent;border-left:none; border-top:none;border-right:none;border-bottom:none;cursor:hand;" type="button" value=[<%=currentPage%>/<%=pageSize%>页]>              </td>           </tr>           </table>           <% }%>       </s:if>        <br>         <center>              <!-- 判断 finddictionary对象是否为空的方法如下：-->              <s:if test="!#finddictionary">                    没有查询到任何记录!              </s:if>        </center><br>        <center>                              <s:url id="url_excelfinddictionary" action="finddictionarygenerateExcel">                              <s:param name="fdtype_c"><s:property value="#request.fdtype_c" /></s:param>                              <s:param name="fdname_c"><s:property value="#request.fdname_c" /></s:param>                              <s:param name="fdvalue_c"><s:property value="#request.fdvalue_c" /></s:param>                              <s:param name="fdremark_c"><s:property value="#request.fdremark_c" /></s:param>                              <s:param name="fdparentid_c"><s:property value="#request.fdparentid_c" /></s:param>                              <s:param name="fddictionarystatus_c"><s:property value="#request.fddictionarystatus_c" /></s:param>                              <s:param name="fdoperator_c"><s:property value="#request.fdoperator_c" /></s:param>                              <s:param name="fdoperatedate_c"><s:date name="#request.fdoperatedate_c" format="yyyy-MM-dd HH:mm:ss"/></s:param>                              <s:param name="fdstatus_c"><s:property value="#request.fdstatus_c" /></s:param>                              </s:url>                              <s:a href="%{url_excelfinddictionary}"><font color="#008000" size="3">生成 Excel 文件</font></s:a>            <a href="index.jsp"><font color="#808080" size="3">返回首页</font>            </a>        </center>    </body></html>
